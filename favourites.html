<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Favorites - Live TV</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet"/>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <style>
    body { font-family: 'Baloo 2', cursive; background: #0f0f0f; }
    .card {
      background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
      border-radius: 1rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .card:hover { transform: translateY(-6px); box-shadow: 0 12px 24px rgba(0,0,0,0.8); }
  </style>
</head>
<body class="text-white min-h-screen flex flex-col">
  <!-- Header -->
  <div id="header">

  <!-- Content -->
  <main class="flex-grow pt-20 pb-10 px-4">
    <div id="favoritesContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>

    <!-- Empty State -->
    <div id="emptyState" class="hidden text-center mt-16">
      <span class="material-icons text-6xl text-gray-500 mb-4">sentiment_dissatisfied</span>
      <p class="text-gray-400">No favorites added yet. Start adding from the player ❤️</p>
    </div>
  </main>

  <!-- Footer -->
  <div id="footer">

<!-- Header/Footer scripts -->
  <script type="module" src="assets/js/header.js"></script>
  <script type="module" src="assets/js/footer.js"></script>

  <script>
    const favoritesContainer = document.getElementById("favoritesContainer");
    const emptyState = document.getElementById("emptyState");

    function loadFavorites() {
      const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      favoritesContainer.innerHTML = "";

      if (favorites.length === 0) {
        emptyState.classList.remove("hidden");
        return;
      } else {
        emptyState.classList.add("hidden");
      }

      favorites.forEach(fav => {
        const card = document.createElement("div");
        card.className = "card p-4 flex flex-col justify-between";

        card.innerHTML = `
          <h2 class="text-lg font-semibold mb-3 truncate">${fav.title}</h2>
          <div class="flex justify-between items-center mt-auto">
            <a href="player.html?stream=${encodeURIComponent(fav.title)}" 
               class="px-4 py-2 bg-red-500 rounded-lg text-white font-semibold hover:bg-red-600 transition">
              ▶ Play
            </a>
            <button class="material-icons text-red-400 hover:text-red-600" onclick="removeFavorite('${fav.src}')">delete</button>
          </div>
        `;

        favoritesContainer.appendChild(card);
      });
    }

    function removeFavorite(src) {
      let favorites = JSON.parse(localStorage.getItem("favorites")) || [];
      favorites = favorites.filter(f => f.src !== src);
      localStorage.setItem("favorites", JSON.stringify(favorites));
      loadFavorites();
    }

    loadFavorites();
  </script>
</body>
</html>