<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Top Contributors</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #1e293b, #0f172a);
      color: white;
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="min-h-screen p-6">

  <!-- Contributors Section -->
  <section>
    <h2 class="text-3xl font-bold mb-6">üèÜ Top Contributors</h2>
    <div id="contributors-list" class="grid gap-4">
      <!-- Contributor cards will load here -->
    </div>
  </section>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // ‚úÖ Firebase Config (Your details)
    const firebaseConfig = {
      apiKey: "AIzaSyB9GaCbYFH22WbiLs1pc_UJTsM_0Tetj6E",
      authDomain: "tnm3ulive.firebaseapp.com",
      databaseURL: "https://tnm3ulive-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "tnm3ulive",
      storageBucket: "tnm3ulive.firebasestorage.app",
      messagingSenderId: "80664356882",
      appId: "1:80664356882:web:c8464819b0515ec9b210cb",
      measurementId: "G-FNS9JWZ9LS"
    };

    // ‚úÖ Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ‚úÖ Fetch and Display Contributors
    const contributorsContainer = document.getElementById('contributors-list');

    db.ref('users').once('value')
      .then(snapshot => {
        contributorsContainer.innerHTML = '';
        const contributors = [];

        snapshot.forEach(childSnapshot => {
          const user = childSnapshot.val();
          if (user.channelsSubmitted && user.channelsSubmitted > 5) {
            contributors.push(user);
          }
        });

        // Sort by channel count (descending)
        contributors.sort((a, b) => b.channelsSubmitted - a.channelsSubmitted);

        if (contributors.length === 0) {
          contributorsContainer.innerHTML = `
            <div class="text-gray-400 text-center py-6">No top contributors yet.</div>
          `;
          return;
        }

        // Render UI
        contributors.forEach((user, index) => {
          contributorsContainer.innerHTML += `
            <div class="bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl p-4 shadow-lg flex items-center gap-4">
              <img src="${user.avatar || 'https://via.placeholder.com/100'}" alt="${user.name}" class="w-14 h-14 rounded-full border-2 border-white shadow-md"/>
              <div class="flex-1">
                <p class="text-lg font-semibold">${user.name}</p>
                <p class="text-sm text-gray-300">${user.channelsSubmitted} Channels</p>
              </div>
              ${index === 0 ? '<span class="material-icons text-yellow-400 text-3xl">emoji_events</span>' : ''}
            </div>
          `;
        });
      })
      .catch(err => console.error('Error fetching contributors:', err));
  </script>
</body>
</html>