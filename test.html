<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Player - Live TV</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>

<!-- Baloo 2 Font -->
<link href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap" rel="stylesheet"/>

<style>
  html, body {
    font-family: 'Baloo 2', cursive;
    margin: 0;
    padding: 0;
    height: 100%;
    background: #111;
    overscroll-behavior: none;
  }

  #video {
    width: 100%;
    height: auto;
    max-height: 60vh;
    background: black;
    object-fit: cover;
    transition: transform 0.2s ease;
  }

  video:fullscreen {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover;
  }

  :fullscreen { padding: 0; margin: 0; }

  .controls { transition: opacity 0.3s; }
  .controls.hidden { opacity: 0; pointer-events: none; }

  .ad-strip {
    height: 4px;
    background-color: rgba(255,255,255,0.2);
    margin-top: 8px;
  }
  .ad-progress {
    height: 100%;
    background-color: #f87171;
    width: 0%;
    transition: width 0.3s;
  }

  body:fullscreen { background: black; }

  @keyframes scroll {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }
  .animate-scroll {
    display: inline-block;
    padding-left: 100%;
    animation: scroll 12s linear infinite;
  }

  /* Toast notification */
  #toast {
    position: fixed;
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%);
    background: #f87171;
    color: white;
    padding: 10px 20px;
    border-radius: 10px;
    display: none;
    z-index: 999;
    font-weight: 500;
    font-family: 'Baloo 2', cursive;
  }
</style>
</head>

<body class="bg-gray-900 text-white flex flex-col min-h-screen">

<!-- Header -->
<header class="fixed top-0 left-0 right-0 z-50 h-16 flex items-center justify-between px-4 bg-gray-800 bg-opacity-90 shadow-md">
  <div class="flex items-center">
    <span class="material-icons text-white">live_tv</span>
    <h1 class="ml-2 text-lg font-bold text-white">Live Player</h1>
  </div>
  <button onclick="history.back()" class="flex items-center space-x-1 text-white hover:text-red-400">
    <span class="material-icons">arrow_back</span>
    <span class="font-semibold">Back</span>
  </button>
</header>

<main class="flex-grow pt-20 pb-24">

  <!-- Video Player Card -->  
  <div class="player-card mx-4 rounded-lg overflow-hidden bg-gray-800">  
    <div class="relative">  
      <video id="video" playsinline webkit-playsinline></video>  

      <!-- Scrolling Text Ad Above Controls -->  
      <div class="absolute bottom-14 left-0 w-full overflow-hidden bg-black bg-opacity-70 text-white text-sm py-1">  
        <div class="animate-scroll whitespace-nowrap">  
          ðŸ”¥ Important : Soon Implementing Premium Features! | Stay Tuned ðŸ”¥ Best Features Await! ðŸ”¥  
        </div>  
      </div>  

      <!-- Ad strip -->  
      <div class="ad-strip absolute bottom-0 left-0 w-full">  
        <div id="adProgress" class="ad-progress"></div>  
      </div>  

      <!-- Controls -->  
      <div id="controls" class="controls absolute bottom-2 left-2 right-2 flex justify-between items-center bg-black bg-opacity-50 p-2 rounded-lg">  
        <div class="flex items-center space-x-2">  
          <button id="playBtn" class="material-icons text-white">play_arrow</button>  
          <button id="muteBtn" class="material-icons text-white">volume_up</button>  
          <input id="volumeSlider" type="range" min="0" max="1" step="0.05" value="1">  
          <span id="videoTitle" class="font-semibold text-lg">Video Title</span>
        </div>  
        <button id="fsBtn" class="material-icons text-white">fullscreen</button>  
      </div>  
    </div>
  </div>

  <!-- Add to Playlist Section -->
  <div class="mx-4 mt-4 flex flex-col items-start bg-gray-800 p-3 rounded-lg">
    <span class="font-semibold text-white mb-2">Add to Playlist</span>
    <button id="playlistBtn" class="flex items-center space-x-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition">
      <span id="playlistIcon" class="material-icons text-yellow-400">playlist_add</span>
      <span id="playlistText" class="text-white font-medium">Add to Playlist</span>
    </button>
  </div>

  <!-- Video Info Section -->
  <div class="mx-4 mt-4 p-4 bg-gray-800 rounded-lg space-y-4 overflow-y-auto max-h-[40vh]">  
    <div id="extraInfo" class="text-gray-300 text-sm"></div>  

    <h3 class="font-semibold mt-2 text-white text-lg">Stream Information</h3>  
    <p class="text-gray-300 text-sm leading-relaxed">All streams displayed here are publicly available online. We do not host, store, or modify these streams in any way. All rights remain with their original providers. This platform only provides an interface to access them for convenience.</p>  

    <h3 class="font-semibold mt-4 text-white text-lg">Usage Rules</h3>  
    <ul class="list-disc list-inside text-gray-300 text-sm leading-relaxed">  
      <li><strong>Personal / Educational Use Only:</strong> Do not use these streams for commercial or public broadcasting purposes.</li>  
      <li><strong>No Redistribution:</strong> You are not allowed to redistribute or rebroadcast the streams without permission.</li>  
      <li><strong>Respect Copyrights & Licenses:</strong> Ensure you comply with the original content owner's terms and applicable laws.</li>  
    </ul>  

    <h3 class="font-semibold mt-4 text-white text-lg">Privacy & Technical Details</h3>  
    <ul class="list-disc list-inside text-gray-300 text-sm leading-relaxed">  
      <li>No personal data is collected, stored, or shared.</li>  
      <li>Streams are loaded directly from the original source; URLs are not logged or exposed publicly.</li>  
      <li>No server-side caching, recording, or proxying is done on our platform.</li>  
      <li>Playback happens on your device using standard open-source player libraries.</li>  
    </ul>  

    <h3 class="font-semibold mt-4 text-white text-lg">Open Source Components</h3>  
    <p class="text-gray-300 text-sm leading-relaxed">This player uses open-source libraries under <strong>MIT, Apache, and GPL licenses</strong>. For details on individual components and their licenses, please refer to the <em>Open Source Notice</em> section in the settings.</p>  

    <h3 class="font-semibold mt-4 text-white text-lg">Legal Notice</h3>  
    <p class="text-gray-300 text-sm leading-relaxed">Accessing publicly available streams for personal and educational purposes is generally considered legal in most regions. However, you must comply with your local laws and the content owner's terms. We do not guarantee the legality of accessing any specific content in your jurisdiction.</p>  

    <h3 class="font-semibold mt-4 text-white text-lg">Takedown Requests</h3>  
    <p class="text-gray-300 text-sm leading-relaxed">If you are a content owner and wish to request removal of a stream, please submit a verified takedown request. We review and process valid requests within <strong>48 hours</strong>.</p>  
  </div>  

  <!-- Bottom Banner Ad -->  
  <div class="w-full text-center my-4">  
    <img src="https://i.ibb.co/QvhQLrrg/ad1.jpg" alt="Ad" class="max-w-[728px] w-[90%] h-auto mx-auto rounded-lg shadow-lg">  
  </div>  
</main>

<!-- Toast Notification -->
<div id="toast">Added to Playlist</div>

<!-- JS -->
<script type="module" src="assets/js/header.js"></script>
<script type="module" src="assets/js/footer.js"></script>
<script type="module" src="assets/js/test.js"></script>

<script>
// Playlist Feature
const playlistBtn = document.getElementById('playlistBtn');
const playlistIcon = document.getElementById('playlistIcon');
const playlistText = document.getElementById('playlistText');
const toast = document.getElementById('toast');

const selectedVideo = localStorage.getItem('selectedVideo');
if(selectedVideo){
  document.getElementById('video').src = selectedVideo;
  document.getElementById('videoTitle').textContent = localStorage.getItem('selectedVideoTitle') || 'Video Title';
  localStorage.removeItem('selectedVideo');
  localStorage.removeItem('selectedVideoTitle');
}

const videoEl = document.getElementById('video');
const videoTitle = document.getElementById('videoTitle');

// Get playlist from localStorage
function getPlaylist() {
  return JSON.parse(localStorage.getItem('playlist')) || [];
}

// Save playlist to localStorage
function savePlaylist(list) {
  localStorage.setItem('playlist', JSON.stringify(list));
}

// Update button based on playlist
function updatePlaylistButton() {
  const list = getPlaylist();
  const exists = list.some(item => item.src === videoEl.src);
  playlistIcon.textContent = exists ? 'playlist_add_check' : 'playlist_add';
  playlistText.textContent = exists ? 'Added to Playlist' : 'Add to Playlist';
}

// Show toast
function showToast() {
  toast.style.display = 'block';
  setTimeout(() => { toast.style.display = 'none'; }, 1500);
}

// Add/remove from playlist
playlistBtn.addEventListener('click', () => {
  let list = getPlaylist();
  const exists = list.some(item => item.src === videoEl.src);
  if(!exists){
    list.push({ title: videoTitle.textContent, src: videoEl.src });
    savePlaylist(list);
    updatePlaylistButton();
    showToast();
  }
});

updatePlaylistButton();
</script>

</body>
</html>