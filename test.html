<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live TV</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  body {
    background: #f8fafc;
    font-family: 'Inter', sans-serif;
  }
  .sticky-top {
    position: sticky;
    top: 0;
    z-index: 50;
    background: #fff;
  }
  .category-active {
    background: #2563eb;
    color: white !important;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn { animation: fadeIn 0.3s ease-in-out; }
</style>
</head>
<body class="flex flex-col min-h-screen">

<!-- Header -->
<header class="bg-blue-600 text-white text-xl font-bold p-4 text-center shadow-lg">
  ðŸ“º Live TV
</header>

<!-- Category Bar -->
<nav id="categoryBar" class="sticky-top flex gap-2 overflow-x-auto p-3 shadow-sm">
  <!-- Buttons dynamically added -->
</nav>

<!-- Channels Grid -->
<main class="p-3">
  <div id="channelsGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
</main>

<script>
const categories = ['All', 'Entertainment', 'Music', 'News'];

const channels = [
  { name: 'MN Music', icon: 'https://tataprime.wordpress.com/wp-content/uploads/2024/03/20240315_0846274573125433222986374.png', stream: 'https://mntv.livebox.co.in/musichls/live.m3u8', category: 'Music' },
  { name: 'MN TV', icon: 'https://tataprime.wordpress.com/wp-content/uploads/2024/03/20240315_0846274573125433222986374.png', stream: 'https://mntv.livebox.co.in/mntvhls/live.m3u8', category: 'Entertainment' },
  { name: 'News 24', icon: 'https://upload.wikimedia.org/wikipedia/en/thumb/1/1a/News_24_logo.svg/2560px-News_24_logo.svg.png', stream: 'https://news24.stream/live.m3u8', category: 'News' },
];

let currentCategory = 'All';

// Create category buttons
const categoryBar = document.getElementById('categoryBar');
categories.forEach(cat => {
  const btn = document.createElement('button');
  btn.textContent = cat;
  btn.className = `
    px-4 py-2 rounded-full text-sm font-semibold bg-gray-100 text-gray-800
    hover:bg-blue-100 transition whitespace-nowrap
  `;
  if (cat === 'All') btn.classList.add('category-active');
  btn.addEventListener('click', () => {
    document.querySelectorAll('#categoryBar button').forEach(b => b.classList.remove('category-active'));
    btn.classList.add('category-active');
    currentCategory = cat;
    renderChannels();
  });
  categoryBar.appendChild(btn);
});

// Render channels grid
function renderChannels() {
  const grid = document.getElementById('channelsGrid');
  grid.innerHTML = '';
  const filtered = currentCategory === 'All' ? channels : channels.filter(ch => ch.category === currentCategory);

  filtered.forEach(ch => {
    const card = document.createElement('div');
    card.className = `
      bg-white rounded-2xl shadow-md hover:shadow-xl transition transform hover:scale-105
      flex flex-col items-center justify-between p-3 animate-fadeIn h-44
    `;
    card.innerHTML = `
      <div class="w-full h-28 bg-gray-50 flex items-center justify-center rounded-xl">
        <img src="${ch.icon}" alt="${ch.name}" class="h-20 w-auto max-w-[80%] object-contain">
      </div>
      <div class="mt-2 text-center text-gray-800 font-semibold text-sm truncate w-full">
        ${ch.name}
      </div>
    `;
    card.onclick = () => {
      window.location.href = `player.html?name=${encodeURIComponent(ch.name)}&url=${encodeURIComponent(ch.stream)}`;
    };
    grid.appendChild(card);
  });

  // Fillers for balanced grid
  const totalCards = filtered.length;
  const cols = window.innerWidth >= 768 ? 4 : (window.innerWidth >= 640 ? 3 : 2);
  const remainder = totalCards % cols;
  if (remainder > 0) {
    for (let i = 0; i < cols - remainder; i++) {
      const filler = document.createElement('div');
      filler.className = 'invisible';
      grid.appendChild(filler);
    }
  }
}

renderChannels();
</script>

</body>
</html>
